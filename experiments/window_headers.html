<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Window Header Gallery | OS93</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        her: { red: "#4A7C9D" }
                    }
                }
            }
        }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Noto+Sans:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../styles.css"> <!-- Base styles -->
    <link rel="stylesheet" href="window_headers.css">

    <style>
        body {
            background-color: #e0e0e0;
            background-image: 
                linear-gradient(45deg, #ccc 25%, transparent 25%), 
                linear-gradient(-45deg, #ccc 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, #ccc 75%), 
                linear-gradient(-45deg, transparent 75%, #ccc 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            font-family: 'Noto Sans', sans-serif;
            overflow: hidden;
        }
        .dark body {
            background-color: #1a1a1a;
            background-image: none;
        }
        
        .label-tag {
            position: absolute;
            top: -24px;
            left: 0;
            background: #333;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
            opacity: 0.8;
            pointer-events: none;
        }
    </style>
</head>
<body class="h-screen w-screen relative">

    <div class="absolute top-4 left-4 z-50 bg-white/80 dark:bg-black/80 p-4 rounded-lg backdrop-blur-md shadow-xl">
        <h1 class="text-xl font-bold mb-2 dark:text-white">Title Bar Gallery</h1>
        <p class="text-sm opacity-80 mb-2 dark:text-gray-300">Drag windows to test the feel.</p>
        <button onclick="document.documentElement.classList.toggle('dark')" class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded text-xs font-bold dark:text-white mt-2">Toggle Dark Mode</button>
    </div>

    <div id="windows-container" class="absolute inset-0">
        <!-- Windows Injected Here -->
    </div>

    <script>
        const styles = [
            { 
                id: 'macos', 
                name: 'macOS (Current)', 
                winClass: 'window', 
                headerClass: 'window-header-macos',
                x: 100, y: 100,
                content: `
                    <div class="controls">
                        <button class="btn close"></button>
                        <button class="btn min"></button>
                        <button class="btn max"></button>
                    </div>
                    <span class="title">Finder</span>
                `
            },
            { 
                id: 'win11', 
                name: 'Windows 11', 
                winClass: 'window', 
                headerClass: 'window-header-win11',
                x: 500, y: 100,
                content: `
                    <div class="title">
                        <span class="w-4 h-4 bg-blue-500 rounded-sm inline-block"></span>
                        Notepad
                    </div>
                    <div class="controls">
                        <button class="btn min">─</button>
                        <button class="btn max">□</button>
                        <button class="btn close">✕</button>
                    </div>
                `
            },
            { 
                id: 'win95', 
                name: 'Windows 95', 
                winClass: 'window window-win95', 
                headerClass: 'window-header-win95',
                x: 100, y: 350,
                content: `
                    <div class="title">
                        <img src="https://win98icons.alexmeub.com/icons/png/computer_explorer-0.png" class="w-4 h-4 mr-1">
                        My Computer
                    </div>
                    <div class="controls">
                        <button class="btn">_</button>
                        <button class="btn">□</button>
                        <button class="btn">X</button>
                    </div>
                `
            },
            { 
                id: 'gnome', 
                name: 'GNOME / Adwaita', 
                winClass: 'window window-gnome', 
                headerClass: 'window-header-gnome',
                x: 500, y: 350,
                content: `
                    <span class="title">Settings</span>
                    <div class="controls">
                        <button class="btn-close"></button>
                    </div>
                `
            },
            { 
                id: 'cyber', 
                name: 'Cyberpunk', 
                winClass: 'window window-cyber', 
                headerClass: 'window-header-cyber',
                x: 300, y: 600,
                content: `
                    <span class="title">NET_RUNNER_V2</span>
                    <div class="controls">
                        <button class="btn min"></button>
                        <button class="btn max"></button>
                        <button class="btn close"></button>
                    </div>
                `
            }
        ];

        let zIndexCounter = 100;
        let activeWindows = {};

        function init() {
            styles.forEach(createWindow);
        }

        function createWindow(config) {
            const winEl = document.createElement('div');
            winEl.className = `${config.winClass} absolute flex flex-col`;
            winEl.id = `win-${config.id}`;
            winEl.style.width = '350px';
            winEl.style.height = '200px';
            winEl.style.left = `${config.x}px`;
            winEl.style.top = `${config.y}px`;
            winEl.style.zIndex = ++zIndexCounter;
            
            // Allow override of window bg content
            const bgClass = config.id === 'win95' ? 'bg-[#C0C0C0]' : (config.id === 'cyber' ? 'bg-black/90 text-green-500' : 'bg-white dark:bg-[#1a1a1a]');

            winEl.innerHTML = `
                <div class="label-tag">${config.name}</div>
                <div class="${config.headerClass}" onmousedown="startDrag(event, '${config.id}')">
                    ${config.content}
                </div>
                <div class="flex-1 p-4 ${bgClass} overflow-hidden text-sm opacity-80">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                </div>
            `;
            
            winEl.onmousedown = () => bringToFront(config.id);

            document.getElementById('windows-container').appendChild(winEl);
            activeWindows[config.id] = { element: winEl };
        }

        function bringToFront(id) {
            activeWindows[id].element.style.zIndex = ++zIndexCounter;
        }

        // Drag Logic
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };
        let dragId = null;

        window.startDrag = function(e, id) {
            if(e.target.tagName === 'BUTTON') return; // Don't drag if button clicked
            
            const win = activeWindows[id].element;
            const rect = win.getBoundingClientRect();
            dragOffset.x = e.clientX - rect.left;
            dragOffset.y = e.clientY - rect.top;
            isDragging = true;
            dragId = id;
            win.style.transition = 'none'; // Disable transition for instant drag
        }

        window.addEventListener('mousemove', (e) => {
            if (isDragging && dragId) {
                const win = activeWindows[dragId].element;
                win.style.left = `${e.clientX - dragOffset.x}px`;
                win.style.top = `${e.clientY - dragOffset.y}px`;
            }
        });

        window.addEventListener('mouseup', () => {
             if (isDragging && dragId) {
                const win = activeWindows[dragId].element;
                win.style.transition = 'width 0.05s ease, height 0.05s ease'; // Restore
            }
            isDragging = false;
            dragId = null;
        });

        init();
    </script>
</body>
</html>
