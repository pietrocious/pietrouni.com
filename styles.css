/* Custom Fonts from S3 bucket */
@font-face {
    font-family: 'Copernicus Trial';
    src: url('/fonts/CopernicusTrial-Heavy.ttf') format('truetype');
    font-weight: 900;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: 'Copernicus Trial';
    src: url('/fonts/CopernicusTrial-Extrabold.ttf') format('truetype');
    font-weight: 800;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: 'Test Tiempos Headline';
    src: url('/fonts/TestTiemposHeadline-Regular.otf') format('opentype');
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: 'Test Tiempos Headline';
    src: url('/fonts/TestTiemposHeadline-Semibold.otf') format('opentype');
    font-weight: 600;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: 'Test Tiempos Text';
    src: url('/fonts/TestTiemposText-Regular.otf') format('opentype');
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: 'Fixedsys';
    src: url('/fonts/fixedsys.ttf') format('truetype');
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

body {
    font-family: 'Noto Sans', sans-serif;
    overflow: hidden;
    user-select: none;
    cursor: default;
    letter-spacing: 0.3px;
    /* Prevent pull-to-refresh on mobile */
    overscroll-behavior: none;
}

/* Warm Ambient Background - Base Classes */
@keyframes herGradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.her-bg {
    background: linear-gradient(-45deg, #E8E0D5, #D4C8BC, #C9BFB5, #E8E0D5);
    background-size: 400% 400%;
    animation: herGradient 15s ease infinite;
}

.her-bg-dark {
    /* Muted dark tones */
    background: linear-gradient(-45deg, #1a1412, #252019, #2d2620, #1a1412);
    background-size: 400% 400%;
    animation: herGradient 20s ease infinite;
}

/* ===== Minimalist Scrollbar ===== */
/* Firefox */
* {
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
}

html.dark * {
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

/* Chrome, Safari, Edge */
*::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

*::-webkit-scrollbar-track {
    background: transparent;
}

*::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 3px;
}

*::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.35);
}

html.dark *::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
}

html.dark *::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.35);
}

/* ===== Apple-Style Animated Wallpapers ===== */

/* Sonoma Flow - Organic Flowing Blobs */
@keyframes sonomaFlow {
    0%, 100% { 
        background-position: 0% 50%, 100% 50%, 50% 100%;
    }
    25% { 
        background-position: 50% 0%, 0% 100%, 100% 50%;
    }
    50% { 
        background-position: 100% 50%, 50% 0%, 0% 50%;
    }
    75% { 
        background-position: 50% 100%, 100% 50%, 50% 0%;
    }
}

.sonoma-bg {
    background: 
        radial-gradient(ellipse 80% 60% at 20% 40%, rgba(147, 197, 253, 0.5) 0%, transparent 50%),
        radial-gradient(ellipse 70% 80% at 80% 60%, rgba(196, 181, 253, 0.5) 0%, transparent 50%),
        radial-gradient(ellipse 60% 70% at 50% 80%, rgba(165, 180, 252, 0.4) 0%, transparent 50%),
        linear-gradient(135deg, #f0f4ff 0%, #faf5ff 50%, #f0fdff 100%);
    background-size: 200% 200%, 200% 200%, 200% 200%, 100% 100%;
    animation: sonomaFlow 20s ease-in-out infinite;
}

.sonoma-bg-dark {
    background: 
        radial-gradient(ellipse 80% 60% at 20% 40%, rgba(59, 130, 246, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse 70% 80% at 80% 60%, rgba(139, 92, 246, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse 60% 70% at 50% 80%, rgba(99, 102, 241, 0.25) 0%, transparent 50%),
        linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0c4a6e 100%);
    background-size: 200% 200%, 200% 200%, 200% 200%, 100% 100%;
    animation: sonomaFlow 20s ease-in-out infinite;
}

/* Sequoia Gradient - Rich Layered Diagonals */
@keyframes sequoiaShift {
    0%, 100% { 
        background-position: 0% 0%, 100% 100%;
    }
    50% { 
        background-position: 100% 100%, 0% 0%;
    }
}

.sequoia-bg {
    background: 
        linear-gradient(135deg, rgba(253, 186, 116, 0.6) 0%, rgba(251, 146, 60, 0.4) 30%, transparent 60%),
        linear-gradient(315deg, rgba(252, 165, 165, 0.5) 0%, rgba(253, 224, 71, 0.3) 40%, transparent 70%),
        linear-gradient(180deg, #fffbeb 0%, #fef3c7 50%, #ffedd5 100%);
    background-size: 200% 200%, 200% 200%, 100% 100%;
    animation: sequoiaShift 15s ease-in-out infinite;
}

.sequoia-bg-dark {
    background: 
        linear-gradient(135deg, rgba(22, 101, 52, 0.6) 0%, rgba(6, 78, 59, 0.5) 30%, transparent 60%),
        linear-gradient(315deg, rgba(30, 58, 138, 0.5) 0%, rgba(23, 37, 84, 0.4) 40%, transparent 70%),
        linear-gradient(180deg, #052e16 0%, #0c1629 50%, #0a0a0a 100%);
    background-size: 200% 200%, 200% 200%, 100% 100%;
    animation: sequoiaShift 15s ease-in-out infinite;
}

/* Ventura Waves - Smooth Flowing Layers */
@keyframes venturaWave {
    0%, 100% { 
        background-position: 0% 50%, 50% 0%, 100% 50%;
    }
    33% { 
        background-position: 100% 50%, 0% 50%, 50% 100%;
    }
    66% { 
        background-position: 50% 100%, 100% 50%, 0% 50%;
    }
}

.ventura-bg {
    background: 
        linear-gradient(120deg, rgba(153, 246, 228, 0.4) 0%, rgba(167, 243, 208, 0.3) 50%, transparent 80%),
        linear-gradient(240deg, rgba(196, 181, 253, 0.4) 0%, rgba(221, 214, 254, 0.3) 50%, transparent 80%),
        linear-gradient(360deg, rgba(165, 180, 252, 0.3) 0%, rgba(199, 210, 254, 0.2) 50%, transparent 80%),
        linear-gradient(135deg, #f0fdfa 0%, #faf5ff 50%, #eef2ff 100%);
    background-size: 300% 300%, 300% 300%, 300% 300%, 100% 100%;
    animation: venturaWave 18s ease-in-out infinite;
}

.ventura-bg-dark {
    background: 
        linear-gradient(120deg, rgba(20, 184, 166, 0.3) 0%, rgba(6, 182, 212, 0.25) 50%, transparent 80%),
        linear-gradient(240deg, rgba(139, 92, 246, 0.3) 0%, rgba(124, 58, 237, 0.25) 50%, transparent 80%),
        linear-gradient(360deg, rgba(99, 102, 241, 0.25) 0%, rgba(79, 70, 229, 0.2) 50%, transparent 80%),
        linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #134e4a 100%);
    background-size: 300% 300%, 300% 300%, 300% 300%, 100% 100%;
    animation: venturaWave 18s ease-in-out infinite;
}


/* Cards / Windows (Tactile, not Glass) */
.window {
    /* Solid paper feel */
    background-color: #FDFBF7;
    box-shadow: 0 10px 30px rgba(62, 39, 35, 0.15);
    border: 1px solid transparent;
    display: flex;
    flex-direction: column;
    border-radius: 20px;
    container-type: inline-size;
    overflow: hidden;
    /* Clip content for border radius */
    pointer-events: auto;
    touch-action: pan-y;
    /* Allow vertical scrolling, prevent horizontal pan */
}

/* Window Open Animation */
@keyframes windowOpen {
    0% {
        opacity: 0;
        transform: scale(0.8) translateY(20px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Window Close Animation */
@keyframes windowClose {
    0% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
    100% {
        opacity: 0;
        transform: scale(0.8) translateY(20px);
    }
}

.window.window-opening {
    animation: windowOpen 0.35s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.window.window-closing {
    animation: windowClose 0.25s cubic-bezier(0.4, 0, 1, 1) forwards;
    pointer-events: none;
}

/* Vault Card Animation */
@keyframes vaultCardIn {
    0% {
        opacity: 0;
        transform: translateY(12px) scale(0.95);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.vault-card-animate {
    animation: vaultCardIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
}

.window.maximized {
    transition: width 0.3s ease, height 0.3s ease, top 0.3s ease, left 0.3s ease;
    border-radius: 0;
    box-shadow: none;
}

.window.minimized {
    transform: scale(0);
    opacity: 0;
    pointer-events: none;
}

html.dark .window {
    background-color: #3E2723;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
    color: #EFEBE9;
}

/* Mobile fullscreen windows */
@media (max-width: 767px) {
    .window {
        border-radius: 0 !important;
        box-shadow: none !important;
    }
}

/* Window Header (macOS Style) */
.window-header {
    height: 38px;
    min-height: 38px;
    display: flex;
    align-items: center;
    justify-content: center;
    /* Center title */
    padding: 0 16px;
    background: rgba(0, 0, 0, 0.03);
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    position: relative;
    cursor: default;
}

html.dark .window-header {
    background: rgba(255, 255, 255, 0.03);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.traffic-lights {
    display: flex;
    flex-direction: row-reverse; /* Reverse order: close on far right */
    gap: 8px;
    position: absolute;
    right: 16px;
    z-index: 10;
}

.win-btn {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: 1.5px solid;
    background: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.1s, background-color 0.15s;
    font-family: system-ui, -apple-system, sans-serif;
    font-weight: 400;
    line-height: 1;
    padding: 0;
}

.win-btn:hover {
    background-color: currentColor;
}

.win-btn:hover::before {
    color: white;
}

.win-btn:active {
    transform: scale(0.9);
}

.btn-close {
    border-color: #FF5F56;
    color: #FF5F56;
}

.btn-close::before {
    content: '×';
    font-size: 14px;
    font-weight: 300;
}

.btn-close:hover {
    background-color: #FF5F56;
}

.btn-close:hover::before {
    color: #fff;
}

.btn-min {
    border-color: #FFBD2E;
    color: #FFBD2E;
}

.btn-min::before {
    content: '−';
    font-size: 16px;
    line-height: 0;
    margin-top: -1px;
}

.btn-min:hover {
    background-color: #FFBD2E;
}

.btn-min:hover::before {
    color: #4a3d00;
}

/* Hide minimize button on mobile */
@media (max-width: 767px) {
    .btn-min {
        display: none;
    }
}

.btn-max {
    border-color: #27C93F;
    color: #27C93F;
}

.btn-max::before {
    content: '⤢';
    font-size: 11px;
    font-weight: 600;
}

.btn-max:hover {
    background-color: #27C93F;
}

.btn-max:hover::before {
    color: #fff;
}

.window-title {
    font-family: 'Noto Sans', sans-serif;
    font-size: 13px;
    font-weight: 500;
    opacity: 0.7;
    pointer-events: none;
}

/* Fluid Typography & Spacing based on Container Width (cqw) */
.dyn-p {
    padding: clamp(1.5rem, 5cqw, 4rem);
}

.dyn-text {
    font-size: clamp(0.9rem, 2.5cqw, 1.1rem);
    line-height: 1.6;
}

.dyn-h1 {
    font-size: clamp(2rem, 8cqw, 3.5rem);
    margin-bottom: clamp(1.5rem, 4cqw, 3rem);
    line-height: 1.1;
}

.dyn-h2 {
    font-size: clamp(1.25rem, 4cqw, 1.8rem);
    margin-bottom: clamp(0.75rem, 2cqw, 1.5rem);
    margin-top: clamp(1.5rem, 4cqw, 3rem);
}

/* Grid that reacts to container width */
.dyn-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: clamp(1.5rem, 4cqw, 3rem);
}

@container (min-width: 500px) {
    .dyn-grid {
        grid-template-columns: 1fr 1fr;
    }
}

/* Active State - The Blue Frame */
.window.active-window {
    border: 1px solid #4A7C9D;
    /* Her Blue */
}

html.dark .window.active-window {
    border: 1px solid #4A7C9D;
    /* Blue in Dark mode too */
}

.window.dragging {
    transition: none;
    opacity: 0.95;
    box-shadow: 0 30px 60px rgba(62, 39, 35, 0.2);
}

.window.resizing {
    transition: none;
}

.window.dragging iframe,
.window.resizing iframe {
    pointer-events: none;
}

.window-content {
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
}

html.dark .window-content {
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

/* Dock - Refined Design */
.dock-container {
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    background: rgba(253, 251, 247, 0.45);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
    border-radius: 24px;
    position: relative;
    transform-origin: bottom center;
    transition: width 0.3s ease;
}

html.dark .dock-container {
    background: rgba(45, 26, 20, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.05);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
}

/* Dock Item - Desktop default */
.dock-item {
    width: 52px;
    height: 52px;
    position: relative;
    transition: transform 0.2s cubic-bezier(0.25, 1, 0.5, 1), margin 0.2s;
    color: #1a1a1a; /* Black icon color */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Mobile: smaller dock items */
@media (max-width: 767px) {
    .dock-item {
        width: 44px;
        height: 44px;
    }
}

html.dark .dock-item {
    color: #E8E0D5; /* Light icons for dark mode */
}

/* Hover effects only on devices that support hover (not touch) */
@media (hover: hover) {
    .dock-item:hover {
        transform: scale(1.15) translateY(-8px);
    }
}

/* Active Indicator Dot */
.dock-item.active::after {
    content: '';
    position: absolute;
    bottom: -4px;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background-color: #4A7C9D;
    box-shadow: 0 0 4px #4A7C9D;
    transition: opacity 0.3s ease;
}

/* Launch Animation */
.animate-dock-bounce {
    animation: dockBounce 0.6s cubic-bezier(0.28, 0.84, 0.42, 1);
}

/* Icon Shapes (img or SVG) */
.dock-icon {
    width: 40px;
    height: 40px;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.15));
    transition: transform 0.15s ease;
}

/* Mobile: smaller icons */
@media (max-width: 767px) {
    .dock-icon {
        width: 32px;
        height: 32px;
    }
}

/* Mobile Dock Container: flush to bottom, no rounded corners */
@media (max-width: 767px) {
    .dock-container {
        border-radius: 0 !important;
        padding: 12px 16px;
    }
}

/* Tooltip Labels */
.dock-label {
    position: absolute;
    bottom: 65px;
    left: 50%;
    transform: translateX(-50%) translateY(8px);
    background: #3E2723;
    color: #F4EBD9;
    padding: 4px 10px;
    border-radius: 6px;
    font-size: 11px;
    font-family: 'Copernicus Trial', serif;
    font-weight: 800;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

@media (min-width: 768px) {
    .dock-label {
        display: block;
    }
}

html.dark .dock-label {
    background: #F4EBD9;
    color: #3E2723;
}

.dock-item:hover .dock-label {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

/* Floating Glass Dock */
.dock-container {
    background: rgba(244, 235, 217, 0.5);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

html.dark .dock-container {
    background: rgba(62, 39, 35, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

/* Menu Bar */
#menubar {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    background: rgba(244, 235, 217, 0.4);
    border-bottom: 1px solid rgba(74, 124, 157, 0.1);
}

html.dark #menubar {
    background: rgba(62, 39, 35, 0.4);
    border-bottom: 1px solid rgba(74, 124, 157, 0.1);
}

/* Spotlight Search */
#spotlight {
    backdrop-filter: blur(8px);
    background: rgba(0, 0, 0, 0.4);
}

.spotlight-result {
    transition: all 0.1s;
    cursor: pointer;
}

.spotlight-result.selected,
.spotlight-result:hover {
    background: rgba(74, 124, 157, 0.1);
    border-left: 3px solid #4A7C9D;
}

/* Custom Scrollbar - Blue */
::-webkit-scrollbar {
    width: 4px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: #4A7C9D;
    border-radius: 4px;
}

html.dark ::-webkit-scrollbar-thumb {
    background: #4A7C9D;
}

canvas {
    image-rendering: auto;
}

/* Minimalist Inputs */
.her-input {
    background: transparent;
    border-bottom: 2px solid #4A7C9D;
    color: inherit;
    font-family: 'Copernicus Trial', serif;
    font-weight: 800;
}

.her-input:focus {
    outline: none;
    border-bottom-color: #4A7C9D;
}

/* Typography Override */
h1,
h2,
h3 {
    font-family: 'Copernicus Trial', serif;
}

p {
    font-family: 'Test Tiempos Text', serif;
}

/* Link styling in content */
.content-link {
    color: #4A7C9D;
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color 0.2s;
}

.content-link:hover {
    border-bottom-color: #4A7C9D;
}

html.dark .content-link {
    color: #4A7C9D;
}

html.dark .content-link:hover {
    border-bottom-color: #4A7C9D;
}

/* Markdown Body Styling (GitHub-style) */
.markdown-body {
    font-family: 'Noto Sans', sans-serif;
    font-size: 14px;
    line-height: 1.7;
    color: #4E342E;
}

html.dark .markdown-body {
    color: #EFEBE9;
}

.markdown-body h1 {
    font-family: 'Copernicus Trial', serif;
    font-size: 2em;
    font-weight: 800;
    margin-bottom: 0.5em;
    padding-bottom: 0.3em;
    border-bottom: 1px solid rgba(74, 124, 157, 0.2);
    color: #4A7C9D;
}

.markdown-body h2 {
    font-family: 'Copernicus Trial', serif;
    font-size: 1.5em;
    font-weight: 800;
    margin-top: 1.5em;
    margin-bottom: 0.5em;
    padding-bottom: 0.2em;
    border-bottom: 1px solid rgba(74, 124, 157, 0.1);
}

.markdown-body h3 {
    font-family: 'Copernicus Trial', serif;
    font-size: 1.25em;
    font-weight: 700;
    margin-top: 1.25em;
    margin-bottom: 0.5em;
}

.markdown-body p {
    margin-bottom: 1em;
}

.markdown-body ul, .markdown-body ol {
    padding-left: 2em;
    margin-bottom: 1em;
}

.markdown-body li {
    margin-bottom: 0.25em;
}

.markdown-body code {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.9em;
    background: rgba(0, 0, 0, 0.05);
    padding: 0.2em 0.4em;
    border-radius: 4px;
}

html.dark .markdown-body code {
    background: rgba(255, 255, 255, 0.1);
}

.markdown-body pre {
    background: rgba(0, 0, 0, 0.05);
    padding: 1em;
    border-radius: 8px;
    overflow-x: auto;
    margin-bottom: 1em;
}

html.dark .markdown-body pre {
    background: rgba(255, 255, 255, 0.05);
}

.markdown-body pre code {
    background: transparent;
    padding: 0;
}

.markdown-body blockquote {
    border-left: 4px solid #4A7C9D;
    padding-left: 1em;
    margin-left: 0;
    margin-bottom: 1em;
    opacity: 0.8;
    font-style: italic;
}

.markdown-body a {
    color: #4A7C9D;
    text-decoration: none;
}

.markdown-body a:hover {
    text-decoration: underline;
}

.markdown-body hr {
    border: none;
    height: 1px;
    background: rgba(74, 124, 157, 0.2);
    margin: 2em 0;
}

.markdown-body strong {
    font-weight: 700;
}

.markdown-body em {
    font-style: italic;
    opacity: 0.8;
}
